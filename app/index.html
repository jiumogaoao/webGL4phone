<!DOCTYPE html>
<html lang="en">
	<head>
		<title>three.js</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
		body {
			margin: 0px;
			overflow: hidden;
		}
		#message{
			width:100%;
			font-size:15px;
			color:#fff;
			position:absolute;
			top:0px;
			left:0px;
			z-index:9999999;
			text-align:center
			}
		</style>
	</head>
	<body ontouchstart="">
		<script type="text/javascript" src="js/zepto/zepto.js"></script>
        <script type="text/javascript" src="js/zepto/detect.js"></script>
        <script type="text/javascript" src="js/zepto/event.js"></script>
        <script type="text/javascript" src="js/zepto/ajax.js"></script>
        <script type="text/javascript" src="js/zepto/form.js"></script>
        <script type="text/javascript" src="js/zepto/fx.js"></script>
        <script type="text/javascript" src="js/zepto/fx_methods.js"></script>
        <script type="text/javascript" src="js/zepto/data.js"></script>
        <script type="text/javascript" src="js/zepto/assets.js"></script>
        <script type="text/javascript" src="js/zepto/selector.js"></script>
        <script type="text/javascript" src="js/zepto/zTouch.js"></script>
		<script src="js/three.min.js"></script>
		<script src="js/CanvasRenderer.js"></script>
		<script src="js/Projector.js"></script>
		<script src="js/app.js"></script>
		<script>


			/*空间贴图,热区*/	
			var textureGroup = {
					"#255#255#255" : {
						texture : [/*[展示层,id通道层],px右,nx左,py上,ny下,pz前,nz后*/
							{"px":"texture/pisa/px.gif","nx":"texture/pisa/nx.gif","py":"texture/pisa/py.gif","ny":"texture/pisa/ny.gif","pz":"texture/pisa/pz.gif","nz":"texture/pisa/nz.gif"},
							{"px":"texture/pisa/pxa.gif","nx":"texture/pisa/nxa.gif","py":"texture/pisa/pya.gif","ny":"texture/pisa/nya.gif","pz":"texture/pisa/pza.gif","nz":"texture/pisa/nza.gif"}
						],
						data : {}/*返回后台的数据*/
					},
                    "#255#0#0" : {
                        texture : [/*[展示层,id通道层],px右,nx左,py上,ny下,pz前,nz后*/
                            {"px":"texture/skybox/px.gif","nx":"texture/skybox/nx.gif","py":"texture/skybox/py.gif","ny":"texture/skybox/ny.gif","pz":"texture/skybox/pz.gif","nz":"texture/skybox/nz.gif"},
                            {"px":"texture/skybox/px.gif","nx":"texture/skybox/nx.gif","py":"texture/skybox/py.gif","ny":"texture/skybox/ny.gif","pz":"texture/skybox/pz.gif","nz":"texture/skybox/nz.gif"}
                        ],
                        data : {}/*返回后台的数据*/
                    }
				};
            /*描述,标签*/
			var descriptionGroup = {
					"#255#255#255" : {
						description : "描述",/*出现的标签*/
						data : {}/*返回后台的数据*/
					}
				};


			var loader = new THREE.XHRLoader();
			loader.load( 'app.json', function ( text ) {

				var player = new APP.Player();
				
				function appReload(color){
					player.reload(color.texture[0]);
					player.setCannel(color.texture[1]);
					}
				
				player.chooseColor=function(color){
				$("#message").html(color)
					if(textureGroup[color]){
						$("#container").empty();
						appReload(textureGroup[color])
						player.load( JSON.parse( text ) );
				player.setSize( window.innerWidth, window.innerHeight );
						}
					}
				player.chooseColor("#255#255#255")
				
				player.play();

				window.addEventListener( 'resize', function () {
					player.setSize( window.innerWidth, window.innerHeight );
				} );

			} );

		</script>
        <div id="container"></div>
        <div id="message">请点击</div>
	</body>
</html>